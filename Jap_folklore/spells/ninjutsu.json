[
  {
	"type": "proficiency",
	"id": "prof_ninjutsu",
	"category": "prof_athletics",
	"name": { "str": "Advanced Ninjutsu" },
	"required_proficiencies": [ "prof_athlete_expert" ],
	"description": "You've endured harsh training in shinobi practices. You unconsciously move more quietly and find executing ninpo techniques easier.",
	"can_learn": true,
	"time_to_learn": "24 h"
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_SHINOBI_EFFECT",
	"recurrence": 1,
    "condition": { "u_has_proficiency": "prof_ninjutsu" },
    "effect": [ { "u_add_effect": "shinobi_effect", "duration": "PERMANENT" } ]
  },
  {
	"type": "effect_type",
	"id": "shinobi_effect",
	"name": [ "shinobi effect" ],
	"show_in_info": true,
	"enchantments": [ { "values": [ { "value": "FOOTSTEP_NOISE", "multiply": -0.2 } ] } ]
  },
  {
	"type": "SPELL",
	"id": "ninpo_star",
	"name": "Ninpo: Vital Shot",
	"description": "Take careful aim and throw a small projectile at an opponents vitals. One must be skillful with throwing to get the most out of this technique.",
	"valid_targets": [ "ally", "hostile", "ground" ],
	"flags": [ "CONCENTRATE", "NO_LEGS", "NO_HANDS", "NON_MAGICAL", "SILENT", "SOMATIC" ],
	"difficulty": { "math": [ "10-(u_has_proficiency('prof_ninjutsu')*5)" ] },
	"skill": "throw",
	"energy_source": "STAMINA",
	"damage_type": "cut",
	"effect": "attack",
	"shape": "blast",
	"affected_body_parts": [ "eyes" ],
	"components": "spell_components_ninja_throw",
	"max_level": { "math": [ "u_skill('throw')-1" ] },
	"min_damage": 5,
	"max_damage": 20,
	"damage_increment": 1.5,
	"min_range": 5,
	"max_range": 15,
	"range_increment": 1,
	"base_casting_time": 200,
	"final_casting_time": 80,
	"casting_time_increment": -12,
	"base_energy_cost":  2000,
	"final_energy_cost": 1000,
	"energy_increment": -100,
	"learn_spells": { "ninpo_star_chase": 6 }
  },
  {
	"type": "SPELL",
	"id": "ninpo_star_chase",
	"name": "Ninpo: Chased Shot",
	"description": "You throw a projectile at an enemy, and take advantage of the minute opportunity to dash forward and follow up with a quick slash. One must be skillful with throwing and athletics to get the most out of this technique.",
	"valid_targets": [ "ally", "hostile" ],
	"flags": [ "CONCENTRATE", "NO_LEGS", "NO_HANDS", "NON_MAGICAL", "SILENT", "SOMATIC" ],
	"difficulty": { "math": [ "13-(u_has_proficiency('prof_ninjutsu')*5)" ] },
	"skill": "athletics",
	"energy_source": "STAMINA",
	"damage_type": "cut",
	"effect": "attack",
	"shape": "blast",
	"extra_effects": [ { "id": "ninja_dash" } ],
	"components": "spell_components_ninja_throw",
	"max_level": { "math": [ "((u_skill('throw')+u_skill('swimming'))/2)-1" ] },
	"min_damage": 15,
	"max_damage": 20,
	"damage_increment": 1.5,
	"min_range": 5,
	"max_range": 10,
	"range_increment": 0.5,
	"base_casting_time": 200,
	"final_casting_time": 80,
	"casting_time_increment": -12,
	"base_energy_cost":  3000,
	"final_energy_cost": 1500,
	"energy_increment": -100	
  },
  {
	"type": "SPELL",
	"id": "ninja_dash",
	"name": "Chased Shot effect",
	"description": "spell effect for the chased shot ninpo",
	"valid_targets": [ "ally", "hostile" ],
	"flags": [ "NON_MAGICAL" ],
	"difficulty": { "math": [ "13-(u_has_proficiency('prof_ninjutsu')*5)" ] },
	"effect": "dash",
	"shape": "line",
	"min_range": 5,
	"max_range": 10,
	"range_increment": 0.5,
	"base_casting_time": 200,
	"final_casting_time": 80,
	"casting_time_increment": -12,
	"base_energy_cost":  3000,
	"final_energy_cost": 1500,
	"energy_increment": -100
  },
  {
    "id": "spell_components_ninja_throw",
    "type": "requirement",
    "components": [
      [
        [ "xacto", 1 ],
        [ "shuriken", 1 ],
        [ "coin_shuriken", 1 ]
      ]
    ]
  },
  {
	"type": "SPELL",
	"id": "ninpo_blind",
	"name": "Ninpo: Blinding Spray",
	"description": "Crush a prepared egg-bomb and blow it into a spray to blind your enemies. One must be skillful with athletics to get the most out of this technique.",
	"valid_targets": [ "ally", "hostile", "ground" ],
	"flags": [ "NO_LEGS", "NO_HANDS", "NON_MAGICAL", "SILENT", "SOMATIC" ],
	"difficulty": { "math": [ "10-(u_has_proficiency('prof_ninjutsu')*5)" ] },
	"energy_source": "STAMINA",
	"effect": "attack",
	"effect_str": "blind",
	"shape": "cone",
	"affected_body_parts": [ "eyes" ],
	"components": "spell_components_ninja_blind",
	"skill": "swimming",
	"max_level": { "math": [ "u_skill('swimming')-1" ] },
	"min_damage": 0,
	"max_damage": 0,
	"damage_type": "bash",
	"min_aoe": 15,
	"max_aoe": 60,
	"aoe_increment": 2.5,
	"min_duration": 300,
	"max_duration": 300,
	"min_range": 3,
	"max_range": 7,
	"range_increment": 0.2,
	"base_casting_time": 200,
	"final_casting_time": 80,
	"casting_time_increment": -12,
	"base_energy_cost":  2000,
	"final_energy_cost": 1000,
	"energy_increment": -100	
  },
  {
	"type": "SPELL",
	"id": "egg_blind",
	"name": "Blinding Shot",
	"description": "Use a prepared egg-bomb to blind your enemies.",
	"valid_targets": [ "ally", "hostile", "ground" ],
	"flags": [ "NO_LEGS", "NON_MAGICAL", "SILENT", "SOMATIC" ],
	"difficulty": { "math": [ "10-(u_has_proficiency('prof_ninjutsu')*5)" ] },
	"skill": "throw",
	"energy_source": "STAMINA",
	"effect": "attack",
	"effect_str": "bash",
	"shape": "blast",
	"affected_body_parts": [ "eyes" ],
	"max_level": { "math": [ "u_skill('throw')-1" ] },
	"min_damage": 1,
	"max_damage": 1,
	"min_duration": 300,
	"max_duration": 300,
	"min_range": 5,
	"max_range": 15,
	"range_increment": 1,
	"base_casting_time": 200,
	"final_casting_time": 80,
	"casting_time_increment": -12,
	"base_energy_cost":  1500,
	"final_energy_cost": 1000,
	"energy_increment": -100	
  },
  {
    "id": "spell_components_ninja_blind",
    "type": "requirement",
    "components": [
      [
        [ "blinding_egg", 1 ]
      ]
    ]
  },
  {
	"type": "SPELL",
	"id": "ninpo_stealth",
	"name": "Ninpo: Shadow",
	"description": "Using autohypnotic suggestion and training, you become like shadow for a time and become much more difficult to see. One must be skillful with athletics to get the most out of this technique.",
	"valid_targets": [ "self" ],
	"flags": [ "CONCENTRATE", "NO_LEGS", "NO_HANDS", "NON_MAGICAL", "SILENT", "SOMATIC" ],
	"difficulty": { "math": [ "14-(u_has_proficiency('prof_ninjutsu')*5)" ] },
	"energy_source": "STAMINA",
	"effect": "effect_on_condition",
	"shape": "blast",
	"effect_str": "EOC_NINJA_STEALTH",
	"message": "you fade into the shadows",
	"skill": "swimming",
	"max_level": { "math": [ "u_skill('swimming')-1" ] },
	"min_duration": 600,
	"max_duration": 600,
	"base_casting_time": 120,
	"final_casting_time": 60,
	"casting_time_increment": -12,
	"base_energy_cost":  3000,
	"final_energy_cost": 1500,
	"energy_increment": -100,
	"learn_spells": { "ninpo_stealth_master": 8 }
  },
  {
	"type": "SPELL",
	"id": "ninpo_stealth_master",
	"name": "Ninpo: Shadow, Constant",
	"description": "You've used stealth techniques to such a masterful degree that you hardly have to focus on maintaining your stealth anymore. Recast the spell to stop maintaining the technique.",
	"valid_targets": [ "self" ],
	"flags": [ "CONCENTRATE", "NO_LEGS", "NO_HANDS", "NON_MAGICAL", "SILENT", "SOMATIC" ],
	"difficulty": { "math": [ "u_has_trait('STEALTH_FAKE') ? 0 : 9" ] },
	"energy_source": "STAMINA",
	"effect": "effect_on_condition",
	"shape": "blast",
	"effect_str": "EOC_MASTER_STEALTH_INITIATE",
	"skill": "swimming",
	"max_level": { "math": [ "u_skill('swimming')-1" ] },
	"min_duration": { "math": [ "((u_spell_level('ninpo_stealth_master')+1)*2)" ] },
	"max_duration": { "math": [ "((u_spell_level('ninpo_stealth_master')+1)*2)" ] },
	"base_casting_time": { "math": [ "u_has_trait('STEALTH_FAKE') ? 0 : 60" ] },
	"base_energy_cost":  { "math": [ "u_has_trait('STEALTH_FAKE') ? 0 : 1500" ] }
  },
  {
	"type": "SPELL",
	"id": "ninpo_smoke",
	"name": "Ninpo: Smoke Escape",
	"description": "Prepare yourself for a quick escape, vanishing into a cloud of smoke with a burst of speed.",
	"valid_targets": [ "self" ],
	"flags": [ "CONCENTRATE", "NO_HANDS", "NON_MAGICAL", "SOMATIC" ],
	"difficulty": { "math": [ "13-(u_has_proficiency('prof_ninjutsu')*5)" ] },
	"energy_source": "STAMINA",
	"effect": "attack",
	"shape": "blast",
	"effect_str": "ninja_escape",
	"extra_effects": [ { "id": "ninpo_smoke_bomb" } ],
	"components": "spell_components_ninja_smoke",
	"skill": "swimming",
	"max_level": { "math": [ "u_skill('swimming')-1" ] },
	"min_duration": 100,
	"max_duration": 400,
	"duration_increment": 20,
	"base_casting_time": 120,
	"final_casting_time": 60,
	"casting_time_increment": -12,
	"base_energy_cost":  3000,
	"final_energy_cost": 1500,
	"energy_increment": -100	
  },
  {
    "type": "effect_type",
    "id": "ninja_escape",
    "name": [ "Smoke Evasion" ],
    "desc": [ "You've vanished into a cloud of smoke, and may attempt an escape at high speed." ],
	"base_mods": { "speed_mod": [100] },
	"max_duration": 400
  },
  {
	"type": "SPELL",
	"id": "ninpo_smoke_bomb",
	"name": "Ninja Smoke Effect",
	"description": "Subspell that creates the actual smoke cloud.",
	"valid_targets": [ "self", "ground" ],
	"difficulty": { "math": [ "13-(u_has_proficiency('prof_ninjutsu')*5)" ] },
	"energy_source": "STAMINA",
	"effect": "attack",
	"shape": "blast",
	"max_level": 20,
	"min_aoe": 5,
	"max_aoe": 5,
	"field_id": "fd_smoke",
	"field_chance": 1,
	"min_field_intensity": 5,
	"max_field_intensity": 10,
	"field_intensity_variance": 1,
	"min_duration": 200,
	"max_duration": 600,
	"duration_increment": 20,
	"base_casting_time": 120,
	"final_casting_time": 60,
	"casting_time_increment": -12,
	"base_energy_cost":  3000,
	"final_energy_cost": 1500,
	"energy_increment": -100	
  },
  {
    "id": "spell_components_ninja_smoke",
    "type": "requirement",
    "components": [
      [
        [ "mod_smokebomb", 1 ]
      ]
    ]
  }
]
